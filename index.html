<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Operation Pain Points Survey</title>
</head>
<body>
    <h2 style="text-align:center; font-family:Arial, sans-serif;">Business Operation Pain Points Survey</h2>
    <p style="text-align:center; font-family:Arial, sans-serif;">
        Please fill out the survey below. Thank you!
    </p>

    <!-- Your FreeSurvey.app script starts here -->
    <script>
    (function() {
        const formTitle = 'Business Operation Pain Points';
        const formDescription = 'This survey is about asking business owners, employees about the repetitive day to day tasks you are experiencing that can be ';
        const submitButtonText = 'Submit';
        const closeButtonText = 'Close';
        const thankYouMessage = 'Thank you for submitting the form! Maraming Salamat!';
        const showAfterSeconds = 0; 
        const showAfterViews = 0;
        const showAgainAfterDays = 0;
        const surveyId = 'su1vtm';

        const storagePrefix = `${surveyId}:`;

        let surveyViewedTimes = window.localStorage.getItem(`${storagePrefix}survey__viewedTimes`) ? parseInt(window.localStorage.getItem(`${storagePrefix}survey__viewedTimes`)) : 0;
        window.localStorage.setItem(`${storagePrefix}survey__viewedTimes`, ++surveyViewedTimes);

        const surveySent = window.localStorage.getItem(`${storagePrefix}survey__sent`);
        const surveyLastClosedAt = window.localStorage.getItem(`${storagePrefix}survey_lastClosedAt`);

        const survey = [
            {type: "CHECKBOXES", question: "Which areas of your work involve the most repetitive tasks?", required: false, options: "Data entry / record keeping, Scheduling & calendar management, Inventory tracking, Responding to customer inquiries, Processing orders & payments, Report preparation, Compliance / documentation, Others"},
            {type: "TEXTAREA", question: "Which operational processes in your business do you feel take up unnecessary time due to repetition? (Describe as much detail as possible)", required: false, options: ""},
            {type: "TEXTAREA", question: "What tools or methods have you tried, and how effective were they?", required: false, options: ""},
            {type: "CHECKBOXES", question: "If AI could help reduce repetitive work, which business areas would you prioritize?", required: false, options: "Customer service, Accounting / finance, Human resources & hiring, Inventory & supply chain, Sales & marketing"},
        ];

        const cssTemplate = `
            <style>
            #su1vtm_survey__modalContainer {
                font: inherit;
                position: relative;
                z-index: 999999999;
                margin: 20px auto;
                width: 90%;
                max-width: 700px;
                background: #fff;
                border-radius: 8px;
                border: 1px solid #ccc;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0,0,0,0.2);
            }
            #su1vtm_survey__formTitle {
                font-size: 1.5rem;
                font-weight: bold;
                color: #1e293b;
                margin-bottom: 10px;
            }
            #su1vtm_survey__formDescription {
                color: #64748b;
                margin-bottom: 20px;
            }
            .su1vtm_survey__button {
                padding: 10px 15px;
                background-color: #e2e8f0;
                border: 1px solid #cbd5e1;
                border-radius: 4px;
                cursor: pointer;
                margin-right: 10px;
            }
            .su1vtm_survey__inputLabel {
                display: block;
                margin-bottom: 8px;
                font-weight: bold;
            }
            .su1vtm_survey__choicesContainer {
                margin-bottom: 15px;
            }
            .su1vtm_survey__textInput {
                width: 100%;
                padding: 8px;
                margin-bottom: 15px;
                border: 1px solid #cbd5e1;
                border-radius: 4px;
                box-sizing: border-box;
            }
            </style>
        `;

        const htmlTemplate = `
            <div id="su1vtm_survey__modalContainer">
                <div id="su1vtm_survey__formContainer">
                    <h1 id="su1vtm_survey__formTitle">{FORM_TITLE}</h1>
                    <p id="su1vtm_survey__formDescription">{FORM_DESCRIPTION}</p>
                    <form id="su1vtm_survey__form">
                        {SURVEY}
                        <div>
                            <button id="su1vtm_survey__submitButton" type="submit" class="su1vtm_survey__button">${submitButtonText}</button>
                        </div>
                    </form>
                </div>
            </div>
        `;

        function generateSurveyHTML(survey) {
            return survey.map((q, index) => {
                const requiredAttr = q.required ? 'required' : '';
                if (q.type === 'TEXTAREA') {
                    return `<label class="su1vtm_survey__inputLabel">${q.question}<textarea class="su1vtm_survey__textInput" name="question${index}" ${requiredAttr}></textarea></label>`;
                } else if (q.type === 'CHECKBOXES') {
                    return `<div class="su1vtm_survey__choicesContainer"><label class="su1vtm_survey__inputLabel">${q.question}</label>` + q.options.split(',').map(option => `<div><input type="checkbox" name="question${index}" value="${option.trim()}"><span>${option.trim()}</span></div>`).join('') + '</div>';
                }
            }).join('');
        }

        function openModal() {
            const modalHTML = htmlTemplate
                .replace('{FORM_TITLE}', formTitle)
                .replace('{FORM_DESCRIPTION}', formDescription)
                .replace('{SURVEY}', generateSurveyHTML(survey));

            document.head.insertAdjacentHTML('beforeend', cssTemplate);
            document.body.insertAdjacentHTML('beforeend', modalHTML);

            document.getElementById('su1vtm_survey__form').addEventListener('submit', handleSubmit);
        }

        function handleSubmit(event) {
            event.preventDefault();
            const form = document.getElementById('su1vtm_survey__form');
            const formData = {};
            survey.forEach((q, index) => {
                if (q.type === 'CHECKBOXES') {
                    formData[`question${index}`] = Array.from(form.elements[`question${index}`])
                        .filter(checkbox => checkbox.checked)
                        .map(checkbox => checkbox.value)
                        .join(', ');
                } else {
                    formData[`question${index}`] = form.elements[`question${index}`].value;
                }
            });

            document.getElementById('su1vtm_survey__formContainer').innerHTML = `<p>${thankYouMessage}</p>`;

            fetch('https://script.google.com/macros/s/AKfycbzvPVqOJn6kUWQyOLCZGAwXR_syR8zhxdp2vFobYGTrXDd_CcHdVsDB9MsrnHB-sdkW/exec', {
                method: 'POST',
                headers: {
                    'Content-Type': 'text/plain;charset=utf-8',
                },
                body: JSON.stringify(formData),
            });
        }

        openModal();
    })();
    </script>
    <!-- Your FreeSurvey.app script ends here -->
</body>
</html>
